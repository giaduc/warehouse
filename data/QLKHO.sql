USE MASTER
GO

IF EXISTS(SELECT * FROM  SYSDATABASES WHERE NAME='QLKHO')
	
DROP DATABASE QLKHO
GO

CREATE DATABASE QLKHO
GO

USE QLKHO
GO


IF OBJECT_ID('PHAN_LOAI') IS NOT NULL
DROP TABLE PHAN_LOAI
GO
create table PHAN_LOAI
(
idphanloai int not null,
PHANLOAI nchar(30) not null,
CONSTRAINT PK_PHAN_LOAI PRIMARY KEY(idphanloai)
)
go
IF OBJECT_ID('KHO') IS NOT NULL
DROP TABLE KHO
GO
create table KHO
(
idkho int not null,
TEN_KHO nchar(30) not null,
CONSTRAINT PK_KHO PRIMARY KEY(idkho)
)
go
IF OBJECT_ID('HANG_SAN_XUAT') IS NOT NULL
DROP TABLE HANG_SAN_XUAT
GO
create table HANG_SAN_XUAT
(
idhangsanxuat int not null,
HANGSANXUAT nvarchar(30) not null,
CONSTRAINT PK_HANG_SAN_XUAT PRIMARY KEY(idhangsanxuat)
)
go
IF OBJECT_ID('HANG_HOA') IS NOT NULL
DROP TABLE HANG_HOA
GO
create table HANG_HOA
(
MAHANGHOA nchar(30) not null,
TENHANGHOA nvarchar(30) not null,
GIANHAP int not null,
HANSUDUNG date not null,
SOLUONGOTNKHO int not null,
HANGSANXUAT int not null,
PHANLOAI int not null,
TEN_KHO int not null,
CONSTRAINT PK_HANG_HOA PRIMARY KEY(MAHANGHOA),
CONSTRAINT FK_HANG_HOA_TEN_KHO FOREIGN KEY(TEN_KHO) REFERENCES KHO,
CONSTRAINT FK_HANG_HOA_HANG_SAN_XUAT FOREIGN KEY(HANGSANXUAT) REFERENCES HANG_SAN_XUAT(idhangsanxuat),
CONSTRAINT FK_HANG_HOA_PHAN_LOAI FOREIGN KEY(PHANLOAI) REFERENCES PHAN_LOAI,
)
go

INSERT INTO PHAN_LOAI VALUES(1,'THUOC LA')
INSERT INTO PHAN_LOAI VALUES(2,'RUOU')
INSERT INTO PHAN_LOAI VALUES(3,'BIA')
INSERT INTO PHAN_LOAI VALUES(4,'VAT LIEU NO CONG NGHIEP')
INSERT INTO PHAN_LOAI VALUES(5,'OTO')
INSERT INTO PHAN_LOAI VALUES(6,'TAU THUYEN')
go


INSERT INTO KHO VALUES(1,'KHO HA NOI')
INSERT INTO KHO VALUES(2,'KHO HO CHI MINH')
INSERT INTO KHO VALUES(3,'KHO DA NANG')
INSERT INTO KHO VALUES(4,'KhO HAI PHONG')
INSERT INTO KHO VALUES(5,'KhO HAI DUONG')
INSERT INTO KHO VALUES(6,'KhO CAM RANH')
go



INSERT INTO HANG_SAN_XUAT VALUES(1,N'Cohiba')
INSERT INTO HANG_SAN_XUAT VALUES(2,N'Heniken')
INSERT INTO HANG_SAN_XUAT VALUES(3,N'TNT')
INSERT INTO HANG_SAN_XUAT VALUES(4,N'Airbus A320')
INSERT INTO HANG_SAN_XUAT VALUES(5,N'BASON INC')
INSERT INTO HANG_SAN_XUAT VALUES(6,N'BMW')
go

INSERT INTO HANG_HOA VALUES('HH1','Cigar Cohiba',800000,'20-04-2020',300,1,1,1)
INSERT INTO HANG_HOA VALUES('HH2','Bia heniken',10000,'03/08/2019',500,1,1,1)
INSERT INTO HANG_HOA VALUES('HH3','Cigar Cohiba',800000,'04/20/2020',300,1,1,1)
INSERT INTO HANG_HOA VALUES('HH4','Cigar Cohiba',800000,'04/20/2020',300,1,1,1)
INSERT INTO HANG_HOA VALUES('HH5','Cigar Cohiba',800000,'04/20/2020',300,1,1,1)
INSERT INTO HANG_HOA VALUES('HH6','Cigar Cohiba',800000,'04/20/2020',300,1,1,1)
INSERT INTO HANG_HOA VALUES('HH7','Test product',800000,'04/20/2020',300,1,1,2)